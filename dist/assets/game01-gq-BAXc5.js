import{P as r}from"./phaser-CP8m6RSH.js";class c extends r.Scene{constructor(){super("Boot")}preload(){}create(){const e=this.make.graphics({x:0,y:0,add:!1});this.textures.exists("bird")||(e.fillStyle(16765773,1),e.fillRoundedRect(0,0,34,24,6),e.fillStyle(16777215,1),e.fillCircle(24,9,5),e.fillStyle(2236962,1),e.fillCircle(25,9,2),e.fillStyle(16747069,1),e.fillTriangle(32,12,40,9,40,15),e.generateTexture("bird",42,24),e.clear()),this.textures.exists("pipe")||(e.fillStyle(3066993,1),e.fillRect(0,0,80,600),e.fillStyle(2472035,1),e.fillRect(0,0,10,600),e.fillRect(70,0,10,600),e.fillStyle(2072149,1),e.fillRect(0,0,80,30),e.fillRect(0,570,80,30),e.generateTexture("pipe",80,600),e.clear()),this.textures.exists("scoreZone")||(e.fillStyle(16777215,1),e.fillRect(0,0,2,2),e.generateTexture("scoreZone",2,2),e.clear()),this.textures.exists("ground")||(e.fillStyle(9329195,1),e.fillRect(0,0,800,80),e.fillStyle(7980634,1),e.fillRect(0,0,800,14),e.fillStyle(6992975,1),e.fillRect(0,14,800,6),e.generateTexture("ground",800,80)),e.destroy(),this.scene.start("Menu")}}class d extends r.Scene{constructor(){super("Menu")}create(){var i;const{width:e,height:t}=this.scale;this.add.rectangle(0,0,e,t,7390670).setOrigin(0,0),this.add.image(e/2,t/2-40,"bird").setScale(1.4),this.add.text(e/2,150,"FLAPPY BIRD",{fontSize:"48px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5),this.add.text(e/2,t/2+40,`Click / Tap to start
Space or Click to flap`,{fontSize:"22px",color:"#ffffff",align:"center"}).setOrigin(.5),this.add.image(e/2,t-40,"ground"),this.input.once("pointerdown",()=>{this.scene.start("Game")}),(i=this.input.keyboard)==null||i.once("keydown-SPACE",()=>{this.scene.start("Game")})}}class p extends r.Scene{constructor(){super("Game")}init(){this.score=0,this.hasStarted=!1,this.isGameOver=!1}create(){var s;const{width:e,height:t}=this.scale;this.add.rectangle(0,0,e,t,7390670).setOrigin(0,0),this.groundHeight=80,this.ground=this.physics.add.staticImage(e/2,t-this.groundHeight/2,"ground"),this.ground.refreshBody(),this.pipes=this.physics.add.group({allowGravity:!1,immovable:!0}),this.scoreZones=this.physics.add.group({allowGravity:!1,immovable:!0}),this.bird=this.physics.add.sprite(e*.28,t*.45,"bird"),this.bird.setCollideWorldBounds(!1),this.bird.body.setAllowGravity(!1),this.bird.body.setSize(32,20,!0),this.scoreText=this.add.text(e/2,60,"0",{fontSize:"56px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5),this.pipeSpeed=220,this.pipeGap=175,this.pipeIntervalMs=1350,this.pipeSpawnX=e+80,this.pipeMinCenterY=140,this.pipeMaxCenterY=t-this.groundHeight-140,this.pipeTimer=this.time.addEvent({delay:this.pipeIntervalMs,loop:!0,paused:!0,callback:this.spawnPipePair,callbackScope:this});const i=()=>{this.isGameOver||(this.hasStarted||this.startRun(),this.bird.setVelocityY(-320),this.bird.setAngularVelocity(0))};this.input.on("pointerdown",i),(s=this.input.keyboard)==null||s.on("keydown-SPACE",i),this.physics.add.collider(this.bird,this.ground,()=>this.gameOver(),void 0,this),this.physics.add.collider(this.bird,this.pipes,()=>this.gameOver(),void 0,this),this.physics.add.overlap(this.bird,this.scoreZones,(n,o)=>this.onScoreZone(o),void 0,this),this.add.text(e/2,t-this.groundHeight-30,"Click / Space to flap",{fontSize:"18px",color:"#ffffff"}).setOrigin(.5).setAlpha(.9)}startRun(){this.hasStarted=!0,this.bird.body.setAllowGravity(!0),this.spawnPipePair(),this.pipeTimer.paused=!1}spawnPipePair(){if(this.isGameOver)return;const{height:e}=this.scale,t=r.Math.Between(this.pipeMinCenterY,this.pipeMaxCenterY),i=t-this.pipeGap/2,s=t+this.pipeGap/2,n=this.pipes.create(this.pipeSpawnX,i,"pipe");n.setOrigin(.5,1),n.setFlipY(!0),n.setVelocityX(-this.pipeSpeed);const o=this.pipes.create(this.pipeSpawnX,s,"pipe");o.setOrigin(.5,0),o.setVelocityX(-this.pipeSpeed);const a=e-this.groundHeight,l=this.scoreZones.create(this.pipeSpawnX+40,a/2,"scoreZone");l.setVisible(!1),l.body.setSize(12,a,!0),l.setVelocityX(-this.pipeSpeed)}onScoreZone(e){this.isGameOver||(e.destroy(),this.score+=1,this.scoreText.setText(String(this.score)))}gameOver(){this.isGameOver||(this.isGameOver=!0,this.pipeTimer.paused=!0,this.pipes.setVelocityX(0),this.scoreZones.setVelocityX(0),this.bird.setTint(16739179),this.time.delayedCall(450,()=>{this.scene.start("GameOver",{score:this.score})}))}update(){if(this.bird){if(!this.isGameOver)if(this.bird.y<-50&&this.gameOver(),this.hasStarted){const e=r.Math.Clamp(this.bird.body.velocity.y/8,-30,90);this.bird.setAngle(e)}else this.bird.setAngle(0);for(const e of this.pipes.getChildren())e.x<-120&&e.destroy();for(const e of this.scoreZones.getChildren())e.x<-120&&e.destroy()}}}class f extends r.Scene{constructor(){super("GameOver")}create(e){var o,a;const{width:t,height:i}=this.scale,s=Number((e==null?void 0:e.score)??0),n=this.updateBestScore(s);this.add.rectangle(0,0,t,i,1780532).setOrigin(0,0),this.add.text(t/2,170,"GAME OVER",{fontSize:"52px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5),this.add.text(t/2,270,`Score: ${s}
Best: ${n}`,{fontSize:"28px",color:"#ffffff",align:"center"}).setOrigin(.5),this.add.text(t/2,390,`Click / Space to play again
Esc for menu`,{fontSize:"20px",color:"#ffffff",align:"center"}).setOrigin(.5).setAlpha(.9),this.input.once("pointerdown",()=>{this.scene.start("Game")}),(o=this.input.keyboard)==null||o.once("keydown-SPACE",()=>this.scene.start("Game")),(a=this.input.keyboard)==null||a.once("keydown-ESC",()=>this.scene.start("Menu"))}updateBestScore(e){try{const t="game01_flappy_best",i=Number(localStorage.getItem(t)??0),s=Math.max(i,e);return localStorage.setItem(t,String(s)),s}catch{return e}}}new r.Game({type:r.AUTO,width:800,height:600,backgroundColor:"#111",physics:{default:"arcade",arcade:{gravity:{y:800},debug:!1}},scene:[c,d,p,f]});
